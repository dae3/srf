; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

; WiFi credential handling
; -----------------------
; To keep WiFi credentials out of version control you have two options:
; 1) Create a local header at `include/wifi_config.h` (this repo includes
;    `include/wifi_config.h.example` as a template). Example file contents:
;      #define WIFI_SSID "MyNetwork"
;      #define WIFI_PASS "MySecretPassword"
;    This file is gitignored by default.
;
; 2) Pass credentials as compile-time build flags. From the CLI you can do:
;      pio run -e nodemcuv2 -D WIFI_SSID=\"MyNetwork\" -D WIFI_PASS=\"MyPass\"
;    Or add them to `build_flags` in this file (not recommended for long-term
;    storage in version control).
;
; The codebase prefers compile-time macros `WIFI_SSID` and `WIFI_PASS` if they
; are present; otherwise it will fall back to an empty string.

[env:nodemcuv2]
platform = espressif8266
board = nodemcuv2
framework = esp8266-rtos-sdk
; Include project includes and SDK headers (mbedtls, lwip, etc.) from the
; PlatformIO packages directory. We prefer the SDK-provided mbedTLS so we
; can link against the RTOS SDK implementation.
; Use env.HOME so PlatformIO/vscode variable expansion works reliably. Don't add
; linker -l flags here; we'll add correct link settings after we locate the
; SDK static libs on your machine.
build_flags =
	-I ${PROJECT_DIR}/include
	-I /var/home/daniel/.platformio/packages/framework-esp8266-rtos-sdk/include
	; optimize for size and strip unused functions/data pulled from static libs
	-Os
	-g0
	-ffunction-sections
	-fdata-sections
	-Wl,--gc-sections
	-Wl,--start-group
	-L/var/home/daniel/.platformio/packages/framework-esp8266-rtos-sdk/lib
	-lmbedtls
	-lssl
	-lcrypto
	; omit -lopenssl to reduce binary size unless you specifically need it
	-Wl,--end-group
monitor_speed = 74880
lib_deps =

lib_ldf_mode = chain
; Remove unwanted linker flags that reference non-existent lib names in this SDK
build_unflags =
	-lmbedx509
	-lmbedcrypto